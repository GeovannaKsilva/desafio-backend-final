Desafio Final - Desenvolvimento Back-end II
API RESTful para gerenciamento de clientes, produtos e usuÃ¡rios com autenticaÃ§Ã£o JWT.

ğŸš€ Tecnologias
Node.js
Express.js
MySQL
JWT (autenticaÃ§Ã£o)
bcryptjs (criptografia de senhas)
node-cache (cache com logs)
Jest + Supertest (testes)
ğŸ“ Estrutura do Projeto
desafio-backend-final/
â”œâ”€â”€ package.json
â”œâ”€â”€ app.js
â”œâ”€â”€ .env
â”œâ”€â”€ .gitignore  
â”œâ”€â”€ README.md
â”œâ”€â”€ .env.example
â”œâ”€â”€ configs/
â”‚   â”œâ”€â”€ database.js
â”‚   â””â”€â”€ cache.js
â”œâ”€â”€ controllers/
â”‚   â”œâ”€â”€ clientesController.js
â”‚   â”œâ”€â”€ produtosController.js
â”‚   â””â”€â”€ usuariosController.js
â”œâ”€â”€ middlewares/
â”‚   â”œâ”€â”€ auth.js
â”‚   â””â”€â”€ validation.js
â”œâ”€â”€ models/
â”‚   â””â”€â”€ init.sql
â”œâ”€â”€ routes/
â”‚   â””â”€â”€ index.js
â”œâ”€â”€ services/
â”‚   â”œâ”€â”€ clientesService.js
â”‚   â”œâ”€â”€ produtosService.js
â”‚   â””â”€â”€ usuariosService.js
â”œâ”€â”€ __tests__/
â”‚   â””â”€â”€ api.test.js
â””â”€â”€ scripts/
    â””â”€â”€ setup.js
ğŸ“‹ PrÃ©-requisitos
Node.js (versÃ£o 14 ou superior)
MySQL (versÃ£o 8 ou superior)
Git
ğŸ”§ InstalaÃ§Ã£o
Clone o repositÃ³rio:
bash
git clone <url-do-repositorio>
cd desafio-backend-final
Instale as dependÃªncias:
bash
npm install
Configure as variÃ¡veis de ambiente:
bash
cp .env.example .env
# Edite o arquivo .env com suas credenciais do MySQL
Configure o banco de dados automaticamente:
bash
npm run setup
Inicie o servidor:
bash
# Desenvolvimento
npm run dev

# ProduÃ§Ã£o
npm start
ğŸ“¡ Endpoints da API
PÃºblico
GET / - InformaÃ§Ãµes da API
POST /login - AutenticaÃ§Ã£o
GET /produtos - Listar produtos (CRUD completo - pÃºblico)
POST /produtos - Criar produto
PUT /produtos/:id - Atualizar produto
DELETE /produtos/:id - Deletar produto
Protegido (requer token JWT)
GET /clientes - Listar clientes (COM CACHE de 30s)
POST /clientes - Criar cliente (invalida cache)
PUT /clientes/:id - Atualizar cliente (invalida cache)
DELETE /clientes/:id - Deletar cliente (invalida cache)
POST /logout - Logout
UsuÃ¡rios
GET /usuarios - Listar usuÃ¡rios
POST /usuarios - Criar usuÃ¡rio
PUT /usuarios/:id - Atualizar usuÃ¡rio
DELETE /usuarios/:id - Deletar usuÃ¡rio
ğŸ” AutenticaÃ§Ã£o
Para acessar endpoints protegidos, inclua o token no header:

Authorization: Bearer <seu-token-jwt>
ğŸ§ª Testes
bash
# Executar todos os testes
npm test

# Executar com watch mode
npm run test:watch
ğŸ“ UsuÃ¡rios padrÃ£o
UsuÃ¡rio: admin | Senha: password
UsuÃ¡rio: user1 | Senha: password
UsuÃ¡rio: teste | Senha: password
ğŸ’¾ Cache
âœ… Endpoint GET /clientes usa cache de 30 segundos
âœ… Cache Ã© invalidado automaticamente ao criar/editar/deletar clientes
âœ… Logs detalhados mostram se dados vieram do cache ou banco
âœ… Console mostra: "ğŸ¯ Dados servidos do CACHE" ou "ğŸ—„ï¸ Dados servidos do BANCO DE DADOS"
ğŸŒ Exemplo de uso
bash
# 1. Login
curl -X POST http://localhost:3000/login \
  -H "Content-Type: application/json" \
  -d '{"usuario": "admin", "senha": "password"}'

# 2. Listar clientes (com token) - primeira vez vem do banco, segunda do cache
curl -X GET http://localhost:3000/clientes \
  -H "Authorization: Bearer <token>"

# 3. Criar cliente (invalida cache)
curl -X POST http://localhost:3000/clientes \
  -H "Authorization: Bearer <token>" \
  -H "Content-Type: application/json" \
  -d '{"nome": "JoÃ£o", "sobrenome": "Silva", "email": "joao@email.com", "idade": 30}'

# 4. Logout
curl -X POST http://localhost:3000/logout \
  -H "Authorization: Bearer <token>"
âœ… Funcionalidades Implementadas
âœ… Arquitetura modular (configs, controllers, middlewares, models, routes, services)
âœ… AutenticaÃ§Ã£o JWT completa
âœ… MySQL com 3 tabelas obrigatÃ³rias
âœ… Cache com logs de 30 segundos no endpoint /clientes
âœ… InvalidaÃ§Ã£o automÃ¡tica do cache
âœ… CRUD completo para todos os recursos
âœ… ValidaÃ§Ãµes completas de todos os campos
âœ… Testes automatizados com Jest + Supertest
âœ… Senhas criptografadas com bcrypt
âœ… Endpoints obrigatÃ³rios (/, /login, /logout)
âœ… SeparaÃ§Ã£o de responsabilidades (controllers â†” services â†” database)
ğŸ‘¥ Grupo
[Nome do integrante 1]
[Nome do integrante 2]
[Nome do integrante 3]
ğŸ“… Entrega
Data limite: 26 de junho de 2025, atÃ© Ã s 23:59

